(this["webpackJsonpproj-react-cli"]=this["webpackJsonpproj-react-cli"]||[]).push([[0],{207:function(e,t,a){},208:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(37),c=a.n(r),i=a(11),l=a(12),u=a(15),s=a(14),m=a(39),p=a.n(m),y=p.a.create({withCredentials:!0}),d={query:function(e){return e?y.get("".concat("/api/toy","?sort=").concat(e.sort,"&name=").concat(e.name,"&type=").concat(e.type,"&inStock=").concat(e.inStock)).then((function(t){return h(t.data,e.sort),t.data})):y.get("".concat("/api/toy")).then((function(e){return h(e.data,"name"),e.data}))},save:function(e){var t;t=e._id?y.put("".concat("/api/toy","/").concat(e._id),e):y.post("".concat("/api/toy"),e);return t.then((function(e){return e.data}))},remove:function(e){return y.delete("".concat("/api/toy","/").concat(e))},get:function(e){return y.get("".concat("/api/toy","/").concat(e)).then((function(e){return e.data}))}};function h(e,t){e.sort((function(e,a){switch(t){case"price":return+e.price<+a.price?-1:+e.price>+a.price?1:0;case"name":return e.name.toLowerCase()>a.name.toLowerCase()?1:e.name.toLowerCase()<a.name.toLowerCase()?-1:0;default:return 0}}))}function f(e,t){return function(a){return a({type:"TOGGLE_LOAD",loadingStatus:t}),d.query(e).then((function(e){return a({type:"SET_TOYS",toys:e})})).then((function(e){return Promise.resolve(e.toys)}))}}function v(e){return function(t){var a=e._id?"UPDATE_TOY":"ADD_TOY";return d.save(e).then((function(e){return t({type:a,toy:e})})).then((function(e){return Promise.resolve(e.toy)}))}}var E=a(5);function b(e){var t,a=e.toy,n=a.name,r=a.price,c=a.type,i=a.inStock,l=a.imgURL;t=i&&"false"!==i?"Sale":"N/A";var u=l||"https://image.shutterstock.com/image-vector/no-image-available-vector-illustration-260nw-744886198.jpg";return o.a.createElement("article",{className:"toy-item"},o.a.createElement("div",{className:"toy-content"},o.a.createElement("h3",{className:"toy-name"},n),o.a.createElement("h3",null,"Price: ",r,"$"),o.a.createElement("h3",null,c),o.a.createElement("h3",null,t),o.a.createElement("img",{className:"toy-thumb",src:u,alt:""})),o.a.createElement("div",{className:"toy-actions flex column"},o.a.createElement("button",{className:"delete-button",onClick:function(){return e.onDeleteToy(e.toy._id)}},"Delete"),o.a.createElement(E.a,{to:"/toy/edit/".concat(e.toy._id)},"Edit Toy"),o.a.createElement(E.a,{to:"/toy/".concat(e.toy._id)}," Details")))}function O(e){return o.a.createElement("div",{className:"toy-list flex wrap justify-center"},e.toys.map((function(t){return o.a.createElement(b,{onDeleteToy:e.onDeleteToy,key:t._id,toy:t})})))}var g=a(40),j=a(1),T=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={filter:{name:"",type:"",inStock:"",sort:""}},e.handleChange=function(t){var a=t.target,n=a.name,o=a.value;o="number"===t.target.type?parseInt(o):o,e.setState((function(e){return{filter:Object(j.a)(Object(j.a)({},e.filter),{},Object(g.a)({},n,o))}}),(function(){e.props.onSetFilter(e.state.filter)}))},e}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("section",{className:"toy-filter fs20"},o.a.createElement("h2",null,"Filter"),o.a.createElement("label",null,"Toy Name",o.a.createElement("input",{type:"text",name:"name",placeholder:"Toy Name",value:this.state.name,onChange:this.handleChange})),o.a.createElement("label",null,"Toy Type",o.a.createElement("select",{name:"type",value:this.state.type,onChange:this.handleChange},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"Funny"},"Funny"),o.a.createElement("option",{value:"Educational"},"Educational"),o.a.createElement("option",{value:"Adult"},"Adult"))),o.a.createElement("label",null,"In Stock",o.a.createElement("select",{name:"inStock",value:this.state.inStock,onChange:this.handleChange},o.a.createElement("option",{value:""},"All"),o.a.createElement("option",{value:"true"},"Yes"),o.a.createElement("option",{value:"false"},"No"))),o.a.createElement("label",null,"Sort By",o.a.createElement("select",{name:"sort",value:this.state.sort,onChange:this.handleChange},o.a.createElement("option",{defaultValue:!0,value:"name"},"Name"),o.a.createElement("option",{value:"price"},"Price"))))}}]),a}(o.a.Component),S=a(13),_=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).onSetFilter=function(t){e.props.saveFilter(t)},e.onDeleteToy=function(t){e.props.removeToy(t)},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.props.loadToys(this.props.filter,!0).then((function(){e.props.toggleLoad(!1)}))}},{key:"componentDidUpdate",value:function(e){var t=this;this.props.filter!==e.filter&&this.props.loadToys(this.props.filter,!0).then((function(){t.props.toggleLoad(!1)}))}},{key:"render",value:function(){var e=this.props,t=e.isLoading,a=e.toys;return o.a.createElement("section",{className:"toy-app"},o.a.createElement(T,{onSetFilter:this.onSetFilter}),o.a.createElement(E.a,{className:"add-toy-link",to:"/toy/edit"},"Add Toy"),o.a.createElement(E.a,{to:"/toy/stats"},"Store Statistics"),t&&o.a.createElement("h2",null,"Loading..."),!t&&a&&o.a.createElement(O,{onDeleteToy:this.onDeleteToy,toys:this.props.toys}))}}]),a}(o.a.Component),k={loadToys:f,removeToy:function(e){return function(t){return d.remove(e).then((function(){return t({type:"REMOVE_TOY",toyId:e})})).then((function(){return Promise.resolve()}))}},saveToy:v,saveFilter:function(e){return function(t){return d.query(e).then((function(){return t({type:"UPDATE_TOY_FILTER",filter:e})})).then((function(){return Promise.resolve()}))}},toggleLoad:function(e){return function(t){t({type:"TOGGLE_LOAD",loadingStatus:e})}}},C=_=Object(S.b)((function(e){return{toys:e.toyApp.toys,filter:e.toyApp.currFilter,isLoading:e.toyApp.isLoading}}),k)(_),A=a(89),L="https://api.cloudinary.com/v1_1/".concat("dsqh7qhpg","/image/upload"),D=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={name:"",price:"",type:"Funny",inStock:"true",imgURL:"",_id:""},e.handleSubmit=function(t){t.imgURL=e.state.toy.imgURL,e.props.saveToy(t).then((function(){e.props.history.push("/")}))},e.validate=function(e){var t={};return e.name.length<3&&(t.name="Name must be with at least 3 characters"),e.price<=0&&(t.price="Price must be a positive number"),t},e.OnUploadImg=function(t){var a=new FormData;return a.append("file",t.target.files[0]),a.append("upload_preset","hrzvfhbk"),p.a.post(L,a).then((function(t){e.setState((function(e){return{toy:Object(j.a)(Object(j.a)({},e),{},{imgURL:t.data.url})}}))}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.loadToy()}},{key:"loadToy",value:function(){var e=this,t=this.props.match.params.id;t&&d.get(t).then((function(t){e.setState(Object(j.a)({},t))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.name,n=t.price,r=t.type,c=t.inStock,i=t._id;return o.a.createElement(o.a.Fragment,null,o.a.createElement("h2",null,"Add/Edit Toy"),o.a.createElement(A.a,{initialValues:{name:a,price:n,type:r,inStock:c,_id:i},validate:this.validate,onSubmit:this.handleSubmit,enableReinitialize:!0},(function(t){var a=t.values,n=t.errors,r=t.touched,c=t.handleChange,i=t.handleBlur,l=t.handleSubmit,u=t.isSubmitting;return o.a.createElement("form",{className:"toy-edit flex column align-center",onSubmit:l},o.a.createElement("label",null,"Name"),o.a.createElement("input",{type:"text",name:"name",placeholder:"Toy Name",onChange:c,onBlur:i,value:a.name}),n.name&&r.name&&o.a.createElement("span",{className:"validation-error-msg"},n.name),o.a.createElement("label",null,"Price"),o.a.createElement("input",{type:"number",name:"price",placeholder:"Toy Price",onChange:c,onBlur:i,value:a.price}),n.price&&r.price&&o.a.createElement("span",{className:"validation-error-msg"},n.price),o.a.createElement("label",null,"Category"),o.a.createElement("select",{name:"type",onChange:c,onBlur:i,value:a.type},o.a.createElement("option",{value:"Funny"},"Funny"),o.a.createElement("option",{value:"Educational"},"Educational"),o.a.createElement("option",{value:"Adult"},"Adult")),o.a.createElement("label",null,"In Stock?"),o.a.createElement("select",{name:"inStock",onChange:c,onBlur:i,value:a.inStock},o.a.createElement("option",{value:"true"},"Yes"),o.a.createElement("option",{value:"false"},"No")),o.a.createElement("label",null,"Choose file "),o.a.createElement("input",{onChange:function(t){return e.OnUploadImg(t)},type:"file"}),o.a.createElement("input",{type:"hidden",name:"_id",value:a._id}),o.a.createElement("button",{type:"submit",disabled:u,className:"save-button"},"Save"))})),o.a.createElement(E.a,{to:"/"},"Toy list"))}}]),a}(o.a.Component),N={saveToy:v},F=Object(S.b)((function(e){return{toy:e.toyApp.currToy}}),N)(D),w=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;this.props.loadToy(e)}},{key:"render",value:function(){var e=this.props.toy;if(!e)return"Loading...";var t=e.imgURL?e.imgURL:"https://image.shutterstock.com/image-vector/no-image-available-vector-illustration-260nw-744886198.jpg";return o.a.createElement("div",{className:"toy-details"},o.a.createElement("h1",null,"Name: ",e.name),o.a.createElement("h2",null,"Price: $",e.price),o.a.createElement("h2",null,"Category: ",e.type),o.a.createElement("img",{src:t,alt:""}),o.a.createElement("p",null,"Lorem, ipsum dolor sit amet consectetur adipisicing elit. Provident optio unde ipsa aliquid eos distinctio quam rem. Itaque sed, harum distinctio veniam soluta ipsa quisquam, exercitationem animi culpa, nesciunt similique!"),o.a.createElement(E.a,{to:"/"},"Toy list"))}}]),a}(o.a.Component),P={loadToy:function(e){return function(t){d.get(e).then((function(e){t({type:"SET_TOY",toy:e})}))}}},U=Object(S.b)((function(e){return{toy:e.toyApp.currToy}}),P)(w),Y=a(86),R=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,o=new Array(n),r=0;r<n;r++)o[r]=arguments[r];return(e=t.call.apply(t,[this].concat(o))).state={data:{labels:[],datasets:[{data:[],backgroundColor:["#FF6384","#36A2EB","#FFCE56"],hoverBackgroundColor:["#FF6384","#36A2EB","#FFCE56"]}]}},e.setData=function(){var t=e.props.toys.reduce((function(e,t){return e[t.type]||(e[t.type]=0),e[t.type]++,e}),{}),a=Object.values(t),n=Object.keys(t);e.setState((function(e){return{data:Object(j.a)(Object(j.a)({},e.data),{},{labels:n,datasets:[Object(j.a)(Object(j.a)({},e.data.datasets[0]),{},{data:a})]})}}))},e}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.props.loadToys(null,!0).then(this.setData)}},{key:"render",value:function(){var e=this.state.data;return o.a.createElement("div",null,o.a.createElement("h2",null,"Toys Per Category"),o.a.createElement(Y.a,{data:e}),o.a.createElement(E.a,{to:"/"},"Toy list"))}}]),a}(n.Component),I={loadToys:f},q=Object(S.b)((function(e){return{toys:e.toyApp.toys}}),I)(R);function B(){return o.a.createElement("header",{className:"app-header fs30"},o.a.createElement("h1",null,"Welcome to Mister-Toy!"))}a(207);var M=a(22),x=function(e){Object(u.a)(a,e);var t=Object(s.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return o.a.createElement("section",{className:"toy-app"},o.a.createElement(B,null),o.a.createElement(M.c,null,o.a.createElement(M.a,{component:q,path:"/toy/stats"}),o.a.createElement(M.a,{component:F,path:"/toy/edit/:id?"}),o.a.createElement(M.a,{component:U,path:"/toy/:id"}),o.a.createElement(M.a,{component:C,exact:!0,path:"/"})))}}]),a}(o.a.Component),G=Object(S.b)()(x),V=a(24),W=a(88),$=a(56),z={toys:[],currToy:null,currFilter:null,isLoading:!1};var J=Object(V.c)({toyApp:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_TOYS":return Object(j.a)(Object(j.a)({},e),{},{toys:Object($.a)(t.toys)});case"SET_TOY":return Object(j.a)(Object(j.a)({},e),{},{currToy:Object(j.a)({},t.toy)});case"REMOVE_TOY":return Object(j.a)(Object(j.a)({},e),{},{toys:e.toys.filter((function(e){return e._id!==t.toyId}))});case"ADD_TOY":return Object(j.a)(Object(j.a)({},e),{},{toys:[].concat(Object($.a)(e.toys),[t.toy])});case"UPDATE_TOY":return Object(j.a)(Object(j.a)({},e),{},{toys:e.toys.map((function(e){return e._id===t.toy._id?t.toy:e}))});case"UPDATE_TOY_FILTER":return Object(j.a)(Object(j.a)({},e),{},{currFilter:Object(j.a)({},t.filter)});case"TOGGLE_LOAD":return Object(j.a)(Object(j.a)({},e),{},{isLoading:t.loadingStatus});default:return e}}}),X=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||V.d,H=Object(V.e)(J,X(Object(V.a)(W.a)));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var K=a(7),Q=Object(K.a)();c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(S.a,{store:H},o.a.createElement(M.b,{history:Q},o.a.createElement(G,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},90:function(e,t,a){e.exports=a(208)}},[[90,1,2]]]);
//# sourceMappingURL=main.cafda817.chunk.js.map